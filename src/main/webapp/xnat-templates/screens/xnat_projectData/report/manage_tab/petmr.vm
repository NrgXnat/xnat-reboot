##Copyright 2012 Radiologics, Inc
##Developer: Tim Olsen tim@radiologics.com
<h3>DICOM Configuration</h3>
<div>
    <table id="pet_mr_setting">
        <tr>
            <td colspan="2" class="highlighted" id="npet_mr_setting_container">
                <table>
                    <tr>
                        <td><label for="separatePETMR"><b>Separate PET-MR?</b></label>&nbsp;&nbsp;&nbsp;</td>
                        <td>
                            <select id="separatePETMR" name="separatePETMR" onchange="XNAT.app.PETMR.update();" disabled>
                                <option value="delete">Use the system default</option>
                                <option value="petmr">Create as PET/MR session</option>
                                <option value="pet">Create as PET session</option>
                                <option value="separate">Separate into PET and MR sessions</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>
                            <small>Should data generated by PET-MR scanners be created as a single PET/MR imaging session, created as a single PET imaging session, or separated into PET and MR sessions?</small>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <script type="text/javascript" src="$content.getURI("scripts/config/MultiValueConfig.js")"></script>

    <script type="text/javascript">
        function deleteConfiguration() {
            jq.ajax({
                url: serverRoot + "/data/projects/$project.getId()/config/separatePETMR/config?XNAT_CSRF=" + window.csrfToken,
                type: 'DELETE',
                contentType: "text/plain"
            }).done(function () {
                jq("#separatePETMR").attr('disabled', false);
            }).fail(function (jqXHR, status, error) {
                jq("#separatePETMR").attr('disabled', false);
                showMessage("page_body", "Failure", "Failed to modify setting: [" + status + "] " + error);
            });
        }

        XNAT.app.PETMR = new MultiValueConfig("#separatePETMR", "/data/projects/$project.getId()/config/separatePETMR/config", false, "delete", {delete: deleteConfiguration});

        function addDicomTabMonitor() {
            XNAT.app.PETMR.init();
        }

        YAHOO.util.Event.onDOMReady(addDicomTabMonitor);
    </script>
</div>